# ===========================================
# SPOOLED BACKEND - Environment Configuration
# ===========================================
# Copy this file to .env and update values
# For Portainer: Add these as environment variables in the stack

# ===========================================
# REQUIRED - Must be set
# ===========================================

# Database password (generate a strong random password)
POSTGRES_PASSWORD=your-super-secure-postgres-password-here

# JWT Secret - minimum 32 characters
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secure-jwt-secret-min-32-chars

# Cloudflare Tunnel Token (from Cloudflare Zero Trust dashboard)
CLOUDFLARE_TUNNEL_TOKEN=your-cloudflare-tunnel-token

# ===========================================
# OPTIONAL - Server Configuration
# ===========================================

# Docker image (automatically uses multi-arch latest)
# BACKEND_IMAGE=ghcr.io/spooled-cloud/spooled-backend:latest

# Database settings
# POSTGRES_USER=spooled
# POSTGRES_DB=spooled

# Redis password (optional but recommended)
# REDIS_PASSWORD=your-redis-password

# Base URL for your deployment
# BASE_URL=https://api.spooled.cloud

# Environment
# RUST_ENV=production

# ===========================================
# OPTIONAL - Performance Tuning
# ===========================================

# Database connection pool
# DATABASE_MAX_CONNECTIONS=25
# DATABASE_MIN_CONNECTIONS=5

# Redis connection pool
# REDIS_POOL_SIZE=10

# Queue settings
# QUEUE_DEFAULT_TIMEOUT=300
# QUEUE_MAX_RETRIES=3

# Worker settings
# WORKER_HEARTBEAT_INTERVAL=10
# WORKER_LEASE_DURATION=30
# WORKER_STALE_THRESHOLD=60

# Rate limiting
# RATE_LIMIT_REQUESTS_PER_SECOND=100
# RATE_LIMIT_BURST=200

# Logging
# RUST_LOG=info,tower_http=info
# JSON_LOGS=true

# ===========================================
# OPTIONAL - Monitoring (profiles: monitoring)
# ===========================================

# Grafana admin credentials
# GRAFANA_USER=admin
# GRAFANA_PASSWORD=admin

# OpenTelemetry (distributed tracing)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317
# OTEL_SERVICE_NAME=spooled-backend

# ===========================================
# OPTIONAL - Admin Tools (profiles: admin)
# ===========================================

# pgAdmin credentials
# PGADMIN_EMAIL=admin@spooled.cloud
# PGADMIN_PASSWORD=admin

# ===========================================
# REGISTRATION MODE (SaaS vs Self-hosted)
# ===========================================

# Registration mode controls who can create organizations:
# - "open": Anyone can create organizations (default, for self-hosted)
# - "closed": Only admin can create organizations (for SaaS)
# - "invite": Require invite code (future feature)
REGISTRATION_MODE=open

# Admin API key for creating organizations when REGISTRATION_MODE=closed
# Generate with: openssl rand -base64 32
# Use this key in X-Admin-Key header when creating organizations
# ADMIN_API_KEY=your-admin-api-key-here
